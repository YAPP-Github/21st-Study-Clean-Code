# 17장 냄새와 휴리스틱

- '휴리스틱'이란, '발견법' 이라고도 불리며 불충분한 시간이나 정보로 인하여 합리적인 판단을 할 수 없거나, 체계적이면서 합리적인 판단이 굳이 필요하지 않은 상황에서 사람들이 빠르게 사용할 수 있게 보다 용이하게 구성된 간편추론의 방법이다. 'Find out', 'Discover'이라는 의미를 가지며 어떠한 문제를 해결할 수 있는 방법이 올바른 것인지 수학적으로 증명되지 않았다면 휴리스틱 한 것이고, 그렇지 않다면 휴리스틱 하지 않은 것이다.
- 컴퓨터 공학에서 휴리스틱 : 컴퓨터 공학에서 발견법은 해결법이 정확히 해결되는가에 대한 문제를 배제하고, 경험과 직관을 통해, 일반적으로 좋은 해결법이나, 보다 간단한 해결법을 찾고자 하는 방법이다. 예를 들어 상업적인 컴퓨터 바이러스 검색 엔진들은 발견법으로 특정 속성또는 특징을 찾아 바이러스를 찾아낸다. 그러나 잠재적으로 정확도가 떨어질 수 있다.

## G2 : 당연한 동작을 구현하지 않는다

- 함수나 클래스는 다른 프로그래머가 당연하게 여길 만한 동작과 기능을 제공해야 한다. 당연한 동작을 구현하지 않으면 코드를 읽거나 사용하는 사람이 더 이상 함수 이름만으로 함수 기능을 직관적으로 예상하기 어렵다. 저자를 신뢰하지 못하므로 코드를 일일이 살펴야 한다.

## G3 : 경계를 올바로 처리하지 않는다

- 코드는 올바로 동작해야 한다. 너무나도 당연한 말이다. 그런데 우리는 올바른 동작이 아주 복잡하다는 사실을 자주 간과한다.
- 모든 경계 조건, 모든 구석지 ㄴ곳, 모든 가벽, 모든 예외는 우아하고 직관적인 알고리즘을좌초시킬 암초다. 스스로의 직관에 의존하지 마라. 모든 경계 조건을 찾아내고, 모든 경계 조건을 테스트하는 테스트 케이스를 작성하라.

## G4 : 안전 절차 무시

- 컴파일러 경고 일부를 꺼버리면 빌드가 쉬워질지 모르지만 자칫하면 끝없는 디버깅에 시달린다. 실패하는 테스트 케이스를 제껴두고 나중으로 미루는 태도는 신용카드가 공짜 돈이라는 생각만큼 위험하다.

## G5 : 중복

- 이 책에 나오는 가장 중요한 규칙 중 하나이므로 심각하게 숙고하기 바란다.
- 코드에서 중복을 발견할 때마다 추상화할 기회로 간주하라. 중복된 코드를 하위 루틴이나 다른 클래스로 분리하라. 이렇듯 추상화로 중복을 정리하면 설계 언어의 어휘가 늘어난다. 다른 프로그래머들이 그만큼 어휘를 사용하기 쉬워진다. 추상화 수준을 높였으므로 구현이 빨라지고 오류가 적어진다.
- 가장 뻔한 유형은 똑같은 코드가 여러 차례 나오는 중복이다. 프로그래머가 미친듯이 마우스로 긁어다 여기저기로 복사한 듯이 보이는 코드다. 이런 중복은 간단한 함수로 교체한다.

## G6 : 추상화 수준이 올바르지 못하다

- 추상화로 개념을 분리할 때는 철저해야 한다. 모든 저차원 개념은 파생 클래스에 넣고, 모든 고차원 개념은 기초 클래스에 넣는다.

## G7 : 기초 클래스가 파생 클래스에 의존한다

- 기초 클래스와 파생 클래스로 나누는 가장 흔한 이유는 고차원 기초 클래스 개념을 저차원 파생 클래스 개념으로부터 분리해 독립성을 보장하기 위해서다. 그러므로 기초 클래스가 파생 클래스를 사용한다면 뭔가 문제가 있다는 말이다. 일반적으로 기초 클래스는 파생 클래스를 아예 몰라야 마땅하다.

## G8 : 과도한 정보

- 잘 정의된 모듈은 인터페이스가 아주 작으면서도 많은 동작이 가능하다. 부실하게 정의된 모듈은 인터페이스가 구질구질하며, 간단한 동작 하나에도 온갖 인터페이스가 필요하다. 인터페이스를 매우 작게 그리고 매우 깐깐하게 만들어라. 정보를 제한해 결합도를 낮춰라.

## G9 : 죽은 코드

- 죽은 코드란 실행되지 않는 코드를 가리킨다. 불가능한 조건을 확인하는 if 문과 throw 문이 없는 try 문에서 catch 블록이 좋은 예다.
- 죽은 코드를 발견하면 올바른 행동을 취하기 바란다. 적절한 장례식을 치뤄주라. 시스템에서 제거하라.

## G10 : 수직 분리

- 변수와 함수는 사용되는 위치에 가깝게 정의한다. 지역 변수는 처음으로 사용하기 직전에 선언하며 수직으로 가까운 곳에 위치해야 한다. 비공개 함수는 처음으로 호출한 직후에 정의한다.

## G11 : 일관성 부족

- 표기법은 신중하게 선택하며, 일단 선택한 표기법은 신중하게 따른다. 한 메서드를 processVerificationRequest라 명명했다면 다른 메서드도 (processDeletionRequest처럼) 유사한 이름을 사용한다.
- 착실하게 적용한다면 이처럼 간단한 일관성만으로도 코드를 읽고 수정하기가 대단히 쉬워진다.
