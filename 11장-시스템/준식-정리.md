# 11장 시스템

## 자바 프록시
```
프록시(Proxy) ?

- 무언가를 대신한다는 뜻
- 즉, 자바에서는 코드에 정의되어 있는 클래스 혹은 객체(target)를 대신하는 클래스, 객체를 의마한다.
- 클라이언트는 target 을 호출하는 줄 알지만, 실제로는 프록시 객체가 먼저 호출되어 여러 기능들을 수행하고 target 에게 요청을 넘긴다.
```

## 순수 자바 AOP 프레임워크
- 대부분의 프록시 코드는 판박이라 도구로 자동화할 수 있다.
- 스프링은 비즈니스 논리를 POJO 로 구현한다. (스프링이 EJB 를 밀어내고 대세가 된 이유다.)
```
POJO(Plain Old Java Object) ?

- 보통 순수한 자바 객체를 말하는데, 특정 기술이나 환경에 종속되지 않는 객체를 뜻한다.
- 예를 들자면, 객체에서 직접적으로 MySQL 관련 라이브러리를 호출하면 이건 POJO 가 아니다.
- 또한 객체지향적인 원리도 충실히 따라야 진정한 POJO 라고 할 수 있다.
```

## AspectJ 관점
```
아래와 같은 코드를 작성하고 .xml 을 통해 적용할 수 있다.
execution() 안에 들어가는 파라미터는, 해당 로직을 어디에 적용할지 정하는 표현값이다.
적용을 원하는 클래스, 메서드 등 표현식만 잘 작성한다면 전부 가능하다.
```
```java
import org.aspectj.lang.annotation.After;
import org.aspectj.lang.annotation.Aspect;
import org.aspectj.lang.annotation.Before;
 
@Aspect
public class AspectExample {
 
    @Before("execution(* com.jstest.spring.aop.SampleAopBean.*(..))")
    public void before() {
        System.out.println("==== Before ====");
    }
 
    @After("execution(* com.jstest.spring.aop.SampleAopBean.*(..))")
    public void after() {
        System.out.println("==== After ====");
    }

    @Around("execution(* com.jstest.spring.aop.SampleAopBean.*(..))")
    public void around() {
        System.out.println("==== Around ====");
    }
}
```

## 테스트 주도 시스템 아키텍처 구축
- 건축 같은 경우는 일단 짓기 시작하면 극적인 구조 변경이 불가능하다.
- 소프트웨어도 구조가 있지만 관점을 효과적으로 분리한다면 극적인 구조 변경이 가능하다.
```
여기서 말하는 효과적인 분리란, JAVA 를 기준으로 한다면 도메인 논리를 POJO 로 구현하는 것을 뜻한다.
```

## 의사 결정을 최적화하라
- 모듈을 나누고 관심사를 분리하면 지엽적인 관리와 결정이 가능해진다.
- 가장 적합한 사람에게 책임을 맡기면 가장 좋다. 우리는 때때로 `가능한 마지막 순간까지 결정을 미루는` 방법이 최선이라는 사실을 까먹곤 한다.
- 관심사를 모듈로 분리한 POJO 시스템은 기민함을 제공한다. 이런 기민함 덕택에 최신 정보에 기반해 최선의 시점에 최적의 결정을 내리기가 쉬워진다. 또한 결정의 복잡성도 줄어든다.

## 명백한 가치가 있을 때 표준을 현명하게 사용하라
- EJB2 는 단지 표준이라는 이유만으로 많은 팀이 사용했다. 가볍고 간단한 설계로 충분했을 프로젝트에서도 EJB2 를 채택했다. 나는 업계에서 여러 형태로 아주 과장되게 포장된 표준에 집착하는 바람에 고객 가치가 뒷전으로 밀려난 사례를 많이 봤다.
```
표준이라고, 좋다고, 많이 사용한다고 무작정 적용할게 아니라 상황에 따라 적절히 적용하자.
``` 

## 시스템은 도메인 특화 언어가 필요하다
- DSL(Design Specific Language) 은 간단한 스크립트 언어나 표준 언어로 구현한 API 를 가리킨다.
```
SQL 과 같이 데이터베이스에 대한 특화된 언어가 DSL 의 한 예시다.
SQL 로는 앱을 만든다거나 웹 서버를 못 만든다.
하지만 JAVA 는 앱, 웹 서버 등 다양한 것들을 만들 수 있다.
즉, JAVA 는 DSL 이 아니다.
```

## 결론
- 시스템 역시 깨끗해야 한다.
- 꺠끗하지 못한 아키텍처는 도메인 논리를 흐리며 기민성을 떨어뜨린다.
- 도메인 논리가 흐려지면 제품 품질이 떨어진다.
- 시스템을 설계하든 개별 모듈을 설계하든, 실제로 `돌아가는 가장 단순한 수단` 을 사용해야 한다는 명심하자.